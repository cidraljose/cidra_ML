{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <h2>Visualize Datasets</h2>
    <p>This page will allow you to visualize your uploaded datasets.</p>
     
    <div class="row">
        <div class="col-md-6">
            <h3>Available Datasets</h3>
            <ul class="list-group">
                {% for dataset in datasets %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ dataset.name }}
                    <a href="{% url 'visualize_dataset_view' dataset.id %}" class="btn btn-primary btn-sm">Visualize</a>
                </li>
                {% endfor %}
            </ul>
        </div>
        <div class="col-md-6">
            {% if selected_dataset %}
            <h3>Visualizing: {{ selected_dataset.name }}</h3>
            <div class="mt-3">
                <h4>Data Head</h4>
                {{ selected_dataset_head | safe }}
            </div>
            <div class="mt-3">
                <h4>Descriptive Statistics</h4>
                {{ selected_dataset_description | safe }}
            </div>
            <div class="mt-3">
                <h4>Missing Values</h4>
                {{ selected_dataset_missing | safe }}
            </div>
            <div class="mt-3">
                <h4>Correlation Matrix</h4>
                <img src="data:image/png;base64,{{ correlation_matrix_plot }}" alt="Correlation Matrix" class="img-fluid">
            </div>
            {% else %}
            <p>Select a dataset from the left to visualize its contents.</p>
            {% endif %}
        </div>
    </div>

</div>
{% endblock %}
